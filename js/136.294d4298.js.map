{"version":3,"file":"js/136.294d4298.js","mappings":"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","sources":["webpack://vue_week6/./node_modules/mitt/dist/mitt.mjs","webpack://vue_week6/./src/libs/emitter.js","webpack://vue_week6/./src/views/CartView.vue","webpack://vue_week6/./src/views/CartView.vue?73a2"],"sourcesContent":["export default function(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e)}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.mjs.map\n","import mitt from 'mitt'\nconst emitter = mitt()\nexport default emitter\n","<template>\n  <h2>購物車列表</h2>\n  <table class=\"table align-middle\">\n    <thead>\n      <tr>\n        <th>圖片</th>\n        <th>商品名稱</th>\n        <th>價格</th>\n        <th></th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr v-for=\"product in products\" :key=\"product.id\">\n        <td style=\"width: 200px\">\n          <div\n            :style=\"{\n              backgroundImage: `url(${product.imageUrl})`,\n            }\"\n            style=\"\n              height: 100px;\n              background-size: cover;\n              background-position: center;\n            \"\n          ></div>\n        </td>\n        <td>{{ product.title }}</td>\n        <td>\n          <div class=\"h5\" v-if=\"product.price === product.origin_price\">\n            {{ product.price }} 元\n          </div>\n          <div v-else>\n            <del class=\"h6\">原價 {{ product.origin_price }} 元</del>\n            <div class=\"h5\">現在只要 {{ product.price }} 元</div>\n          </div>\n        </td>\n        <td>\n          <div class=\"btn-group btn-group-sm\">\n            <button type=\"button\" class=\"btn btn-outline-secondary\"\n              :disabled=\"isLoadingItem === product.id\"\n              @click=\"openProductModal(product.id)\">\n              查看更多\n            </button>\n\n            <button type=\"button\" class=\"btn btn-danger\"\n              @click=\"addToCart(product.id)\"\n              :disabled=\"isLoadingItem === product.id\"\n              >\n              <span class=\"spinner-grow spinner-grow-sm\"\n              v-show=\"isLoadingItem === product.id\"></span>\n              加到購物車\n            </button>\n          </div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</template>\n\n<script>\nimport emitter from '@/libs/emitter'\n\nexport default {\n  data () {\n    return {\n      isLoading: false,\n      cartData: {},\n      products: []\n    }\n  },\n  methods: {\n    getProducts () {\n      this.$http.get(`${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`)\n        .then((res) => {\n          this.products = res.data.products\n        })\n        .catch((err) => {\n          alert(err.data.message)\n        })\n    },\n    addToCart (id, qty = 1) {\n      const data = {\n        product_id: id,\n        qty\n      }\n      this.$http.post(`${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`, { data })\n        .then((res) => {\n          emitter.emit('get-cart')\n          alert(res.data.message)\n        })\n        .catch((err) => {\n          alert(err.data.message)\n        })\n    }\n  },\n  mounted () {\n    this.getProducts()\n  }\n}\n</script>\n","import { render } from \"./CartView.vue?vue&type=template&id=36488b20\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/xieciaoyun/learning/git-demo/vue_week6/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["n","all","Map","on","t","e","i","get","push","set","off","splice","indexOf","emit","slice","map","emitter","mitt","_createElementVNode","class","style","_hoisted_1","_hoisted_3","_createElementBlock","_Fragment","_renderList","$data","product","key","id","imageUrl","_toDisplayString","title","price","origin_price","_hoisted_6","type","disabled","_ctx","onClick","_hoisted_10","$options","data","isLoading","cartData","products","methods","getProducts","this","$http","then","res","catch","err","alert","message","addToCart","qty","product_id","post","mounted","__exports__","render"],"sourceRoot":""}